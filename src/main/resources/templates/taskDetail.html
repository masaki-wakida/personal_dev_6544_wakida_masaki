<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>タスク詳細</title>
<link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
    <h1>タスク詳細</h1>
    
    <span th:text="${@account.name}+' さんがログイン中'"></span>
    <a href="/logout">ログアウト</a><br>
    
    <ul th:if="${errorList}" class="error">
		<li th:each="error:${errorList}" th:text="${error}" style="color: red"></li>
	</ul>
    
    <form th:action="@{'/tasks/' + ${task.id} + '/update'}" method="post" onsubmit="return updateBtn()">
    <table border="1">
            <tr>
                <th>カテゴリー</th>
                <td>
                  <input type="radio" id="categoryId" name="categoryId" value="1" th:checked="${task.categoryId == 1}"/>仕事
                  <input type="radio" id="categoryId" name="categoryId" value="2" th:checked="${task.categoryId == 2}"/>個人
                  <input type="radio" id="categoryId" name="categoryId" value="3" th:checked="${task.categoryId == 3}"/>その他
                </td>
            </tr>
            <tr>
                <th>タイトル</th>
                <td>
                    <input type="text" name="title" th:value="${task.title}" required pattern=".*[^\s]+.*" maxlength="50">
                </td>
            </tr>
            <tr>
                <th>期限</th>
                <td>
                    <input type="date" name="limitDate" th:value="${task.limitDate}">
                </td>
            </tr>
            <tr>
                <th>重要度</th>
                <td>
                    <input type="radio" id="importance" name="importance" value="0" th:checked="${task.importance == 0}"/>高
                    <input type="radio" id="importance" name="importance" value="1" th:checked="${task.importance == 1}"/>中
                    <input type="radio" id="importance" name="importance" value="2" th:checked="${task.importance == 2}"/>低
                </td>
            </tr>
            <tr>
                <th>進捗状況</th>
                <td>
                    <input type="radio" id="progress" name="progress" value="0" th:checked="${task.progress == 0}"/>未着手
                    <input type="radio" id="progress" name="progress" value="1" th:checked="${task.progress == 1}"/>進行中
                    <input type="radio" id="progress" name="progress" value="2" th:checked="${task.progress == 2}"/>完了
                </td>
            </tr>
            <tr>
                <th>メモ</th>
                <td>
                    <input type="text" name="memo" th:value="${task.memo}" maxlength="1000">
                </td>
            </tr>
        </table>
        <button type="submit">更新</button>
    </form>
    
    <form th:action="@{'/tasks/' + ${task.id} + '/update'}" method="post" onsubmit="return deleteBtn()">
		<button type="submit">削除</button>
	</form>
</body>
</html>


<script type="text/javascript">
  function updateBtn(){
    if(window.confirm('更新しますか？')) {
      return true; // 「OK」なら更新
    }
    else {
      return false; // 「キャンセル」なら更新しない
    }
  }
  
    function deleteBtn(){
    if(window.confirm('削除しますか？')) {
      return true; // 「OK」なら削除
    }
    else {
      return false; // 「キャンセル」なら削除しない
    }
  }
</script>