<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>タスク一覧</title>

</head>
<body>
	<h1>タスク詳細</h1>
	 
	<span th:text="${@account.name}+' さんがログイン中'"></span>
	<a href="/logout">ログアウト</a><br>
	 
    <a href="/tasks">全カテゴリー</a>
	<a th:each="c:${categories}" th:href="'/tasks?categoryId='+${c.id}">
		<span th:text="${c.name}" style="padding-left: 10px;"></span>
	</a>
    
     <form th:action="@{/tasks}" method="get">
		<input type="text" name="keyword" placeholder="タスクタイトル" th:value="${keyword}">
		<button>検索</button>
	</form>

    <table border="1">
        <tr>
            <th>ID</th>
            <th>タイトル</th>
            <th>カテゴリー</th>
            <th>期限</th>
            <th>重要度</th>
            <th>進捗状況</th>
        </tr>

        <tr th:each="task : ${tasks}">
            <td th:text="${task.id}"></td>
            <td><a th:href="@{'/tasks/' + ${task.id} + '/detail'}" th:text="${task.title}"></a></td>
            <td th:each="cmap : ${categoryMap}" th:if="${cmap.key} == ${task.categoryId}" th:text="${cmap.value}"></td>
            <td th:text="${task.limitDate}"></td>
            <td th:each="imap : ${importanceMap}" th:if="${imap.key} == ${task.importance}" th:text="${imap.value}"></td>
            <td th:each="pmap : ${progressMap}" th:if="${pmap.key} == ${task.progress}" th:text="${pmap.value}"></td>

        </tr>
    </table>

    <a href="/tasks/add">新規登録</a>
</body>
</html>
